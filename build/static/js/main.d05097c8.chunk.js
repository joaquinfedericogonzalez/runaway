(this["webpackJsonpmy-app-runaway"]=this["webpackJsonpmy-app-runaway"]||[]).push([[0],{63:function(e,t,c){},66:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},84:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(48),i=c.n(r),o=c(4),s=c(6),l=c(7),j=(c(63),c(3)),d=function(){return Object(j.jsxs)("div",{className:"spinner",children:[Object(j.jsx)("div",{className:"double-bounce1"}),Object(j.jsx)("div",{className:"double-bounce2"})]})},b=c(27),u=(c(47),b.a.initializeApp({apiKey:"AIzaSyDy2rV8TMicSWBc0wY9wqrC8-C6FGXwO6I",authDomain:"runaway-3bc18.firebaseapp.com",projectId:"runaway-3bc18",storageBucket:"runaway-3bc18.appspot.com",messagingSenderId:"1072433138753",appId:"1:1072433138753:web:f8cba18ae5eff43a640ac0"})),O=function(){return b.a.firestore(u)},m=c(92),h=c(51),x=c(12),p=(c(66),function(e){var t=e.id,c=e.image,a=e.name,n=e.price;return Object(j.jsx)("div",{children:Object(j.jsx)(m.a,{className:"card",border:"dark",style:{width:"18rem"},children:Object(j.jsxs)(m.a.Body,{children:[Object(j.jsx)(m.a.Img,{variant:"top",src:c}),Object(j.jsx)(m.a.Title,{children:a}),Object(j.jsxs)(m.a.Text,{children:["Precio: $",n]}),Object(j.jsx)(x.b,{to:"/detail/".concat(t),children:Object(j.jsx)(h.a,{variant:"dark",children:"Ver mas"})})]})})})}),f=function(e){var t=e.productos,c=void 0===t?[]:t;return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:c.map((function(e){return Object(a.createElement)(p,Object(o.a)(Object(o.a)({},e),{},{key:e.id}))}))})})},v=Object(a.createContext)(),g=function(e){var t=e.children,c=Object(a.useState)(!1),n=Object(s.a)(c,2),r=n[0],i=n[1];return Object(j.jsx)(v.Provider,{value:{loading:r,setLoading:i},children:t})},N=function(e){var t=e.titulo,c=Object(a.useState)([]),n=Object(s.a)(c,2),r=n[0],i=n[1],b=Object(a.useContext)(v),u=b.loading,m=b.setLoading,h=Object(l.h)().categoryId;return Object(a.useEffect)((function(){m(!0);var e=O();(h?e.collection("productos").where("category","==",h):e.collection("productos")).get().then((function(e){var t=e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())}));i(t)})).catch((function(e){return console.log(e)})).finally((function(){m(!1)}))}),[h,m]),Object(j.jsxs)("section",{className:"container my-5",children:[Object(j.jsx)("h1",{children:t}),u?Object(j.jsx)(d,{}):Object(j.jsx)(f,{productos:r})]})},y=c(52),C=c(32),k=Object(a.createContext)(),I=JSON.parse(localStorage.getItem("carrito"))||[],T=function(e){var t=e.children,c=Object(a.useState)(I),n=Object(s.a)(c,2),r=n[0],i=n[1];console.log(r);return Object(a.useEffect)((function(){localStorage.setItem("carrito",JSON.stringify(r))}),[r]),Object(j.jsx)(k.Provider,{value:{carrito:r,addToCart:function(e){i([].concat(Object(C.a)(r),[e]))},removeItem:function(e){var t=r.filter((function(t){return t.id!==e}));i(t)},calcularCantidad:function(){return r.reduce((function(e,t){return e+t.cantidad}),0)},vaciarCarrito:function(){i([])},IsInCart:function(e){return r.some((function(t){return t.id===e}))},calcularTotal:function(){return r.reduce((function(e,t){return e+t.cantidad*t.price}),0)}},children:t})},w=c.p+"static/media/runaway5.27cbd162.png",S=function(){var e=Object(a.useContext)(k).calcularCantidad;return Object(j.jsxs)("div",{style:{display:0===e()?"none":"block"},children:[Object(j.jsx)(y.a,{className:"icon"}),Object(j.jsx)("span",{children:e()})]})},A=function(){return Object(j.jsx)("img",{src:w,alt:"Logo de pagina",height:"80px",width:"220px"})},E=c(91),P=(c(71),function(){return Object(j.jsx)("header",{children:Object(j.jsx)("div",{children:Object(j.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light",children:[Object(j.jsx)(x.b,{className:"navbar-brand",to:"/",children:Object(j.jsx)(A,{})}),Object(j.jsx)(x.b,{className:"nav-link",to:"/carrito",children:Object(j.jsx)(S,{})}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse justify-content-center",id:"navbarNav",children:Object(j.jsxs)("ul",{className:"navbar-nav",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(x.b,{className:"nav-link",to:"/",children:Object(j.jsx)("b",{children:"INICIO"})})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(x.b,{className:"nav-link",to:"/productos",children:Object(j.jsx)("b",{children:"PRODUCTOS"})})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(x.b,{className:"nav-link",to:"/envios",children:Object(j.jsx)("b",{children:"ENVIOS"})})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(x.b,{className:"nav-link",to:"/contacto",children:Object(j.jsx)("b",{children:"CONTACTO"})})}),Object(j.jsx)("b",{children:Object(j.jsxs)(E.a,{title:"CATEGORIAS",id:"basic-nav-dropdown",children:[Object(j.jsx)(x.c,{className:"nav-link",exact:!0,to:"/productos/pantalones",children:Object(j.jsx)("b",{children:"PANTALONES"})}),Object(j.jsx)(x.c,{className:"nav-link",exact:!0,to:"/productos/mochilas",children:Object(j.jsx)("b",{children:"MOCHILAS"})}),Object(j.jsx)(x.c,{className:"nav-link",exact:!0,to:"/productos/blazers y conjuntos",children:Object(j.jsx)("b",{children:"BLAZERS Y CONJUNTOS"})}),Object(j.jsx)(x.c,{className:"nav-link",exact:!0,to:"/productos/camperas",children:Object(j.jsx)("b",{children:"CAMPERAS"})})]})})]})})]})})})}),B=function(e){var t=e.cantidad,c=e.modify,a=e.max;return Object(j.jsxs)("div",{children:[Object(j.jsx)(h.a,{onClick:function(){t>1&&c(t-1)},variant:"dark",className:"btn btn-primary mx-3 my-3",children:"-"}),Object(j.jsx)("span",{children:t}),Object(j.jsx)(h.a,{onClick:function(){t<a&&c(t+1)},variant:"dark",className:"btn btn-primary mx-3 my-3",children:"+"})]})},D=(c(72),function(e){var t=e.id,c=e.name,n=e.detail,r=e.price,i=e.category,o=e.image,d=e.stock,b=Object(l.g)().goBack,u=Object(a.useContext)(k),O=u.addToCart,p=u.IsInCart,f=Object(a.useState)(0),v=Object(s.a)(f,2),g=v[0],N=v[1];return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{children:Object(j.jsxs)(m.a,{className:"text-center",border:"dark",children:[Object(j.jsxs)(m.a.Header,{children:[Object(j.jsx)(m.a.Title,{children:c}),Object(j.jsx)(m.a.Img,{src:o,alt:"Imagen del producto"})]}),Object(j.jsxs)(m.a.Body,{children:[Object(j.jsx)(m.a.Title,{children:n}),Object(j.jsxs)(m.a.Title,{children:["Precio: $",r]}),Object(j.jsx)(B,{cantidad:g,modify:N,max:d}),p(t)?Object(j.jsx)(x.b,{to:"/carrito",className:"btn",children:Object(j.jsx)(h.a,{variant:"dark",children:"Terminar Compra"})}):Object(j.jsx)(h.a,{variant:"dark",onClick:function(){g>0&&O({id:t,image:o,name:c,price:r,category:i,cantidad:g})},children:"Agregar al carrito"}),Object(j.jsx)(h.a,{variant:"dark",onClick:function(){return b()},children:"Volver"})]})]})})})}),F=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),c=t[0],n=t[1],r=Object(a.useContext)(v),i=r.loading,b=r.setLoading,u=Object(l.h)().itemId;return Object(a.useEffect)((function(){b(!0),O().collection("productos").doc(u).get().then((function(e){n(Object(o.a)({id:e.id},e.data()))})).catch((function(e){return console.log(e)})).finally((function(){b(!1)}))}),[u,b]),Object(j.jsx)("div",{children:i?Object(j.jsx)(d,{}):Object(j.jsx)(D,Object(o.a)({},c))})},L=c(57),z=(c(73),function(){var e=Object(a.useContext)(k),t=e.carrito,c=e.vaciarCarrito,n=e.removeItem,r=e.calcularTotal;return Object(j.jsx)("div",{className:"container my-5",children:0===t.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"\xa1Tu carrito esta vacio!"}),Object(j.jsx)(x.b,{to:"/",children:Object(j.jsx)(h.a,{className:"btn",children:"Volver al home"})})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Resumen de mi compra"}),Object(j.jsx)("hr",{}),t.map((function(e){return Object(j.jsxs)("div",{className:"carro",children:[Object(j.jsx)("img",{className:"tama\xf1o",src:e.image,alt:"imagen producto"}),Object(j.jsx)("h4",{children:e.name}),Object(j.jsxs)("p",{children:["Cantidad: ",e.cantidad]}),Object(j.jsxs)("p",{children:["Precio:",e.price*e.cantidad]}),Object(j.jsx)(h.a,{className:"btn btn-danger",onClick:function(){return n(e.id)},children:Object(j.jsx)(L.a,{})})]})})),Object(j.jsx)("hr",{}),Object(j.jsxs)("h3",{className:"my-3",children:["Precio total: $ ",r()]}),Object(j.jsx)(h.a,{className:"btn btn-danger",onClick:c,children:"Vaciar carrito"}),Object(j.jsx)(x.b,{to:"/checkout",className:"btn mx-3",children:"Finalizar compra"})]})})}),V=c(25),J=c(24),R=c.n(J),M=(c(84),c(33)),Y=c.n(M),$=c(43),G=function(){var e=Object($.a)(Y.a.mark((function e(t,c,a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object($.a)(Y.a.mark((function e(n,r){var i,s,l,j,d,u,m;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={buyer:t,items:c.map((function(e){return{id:e.id,precio:e.price,cantidad:e.cantidad}})),total:a,date:b.a.firestore.Timestamp.fromDate(new Date)},s=O(),l=s.collection("orders"),j=s.collection("productos").where(b.a.firestore.FieldPath.documentId(),"in",c.map((function(e){return e.id}))),e.next=6,j.get();case 6:d=e.sent,u=s.batch(),m=[],d.docs.forEach((function(e){var t=c.find((function(t){return t.id===e.id}));e.data().stock>=t.cantidad?u.update(e.ref,{stock:e.data().stock-t.cantidad}):m.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),0===m.length?l.add(i).then((function(e){u.commit(),n(e.id)})).catch((function(e){r(e)})):r(m);case 11:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(a.useContext)(v),t=e.loading,c=e.setLoading,n=Object(a.useContext)(k),r=n.carrito,i=n.calcularTotal,b=n.vaciarCarrito,u=Object(a.useState)({nombre:"",apellido:"",email:"",tel:""}),O=Object(s.a)(u,2),m=O[0],h=O[1],x=function(e){h(Object(o.a)(Object(o.a)({},m),{},Object(V.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)(j.Fragment,{children:[0===r.length&&Object(j.jsx)(l.a,{to:"/"}),t&&Object(j.jsx)(d,{}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"my-3 text",children:"\xa1Ya casi es tuyo, completa los datos para finalizar la compra!"}),Object(j.jsx)("div",{className:"container my-5",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m.nombre.length<3?R.a.fire({icon:"error",title:"Oops...",text:'No se completo correctamente el campo "Nombre"',confirmButtonColor:"#A3D702"}):m.apellido.length<3?R.a.fire({icon:"error",title:"Oops...",text:'No se completo correctamente el campo "Apellido"',confirmButtonColor:"#A3D702"}):m.email.length<7?R.a.fire({icon:"error",title:"Oops...",text:'No se completo correctamente el campo "Email"',confirmButtonColor:"#A3D702"}):m.tel.length<5?R.a.fire({icon:"error",title:"Oops...",text:'No se completo correctamente el campo "Telefono"',confirmButtonColor:"#A3D702"}):(c(!0),G(m,r,i()).then((function(e){R.a.fire({position:"top-end",icon:"success",title:"\xa1Tu compra fue resgistrada!",text:"Numero de orden: ".concat(e),showConfirmButton:!1,timer:1500,willClose:function(){b()}})})).catch((function(e){R.a.fire({icon:"error",title:"\xa1No hay stock disponible!",text:"El producto ".concat(e.map((function(e){return e.name})).join(",")," no tiene stock disponible para esta compra")})})).finally((function(){c(!1)})))},children:[Object(j.jsx)("h5",{children:"Todos los campos son obligatorios"}),Object(j.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Nombre",name:"nombre",value:m.nombre,onChange:x}),0===m.nombre.length,Object(j.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Apellido",name:"apellido",value:m.apellido,onChange:x}),0===m.apellido.length,Object(j.jsx)("input",{className:"form-control my-2",type:"email",placeholder:"Email",name:"email",value:m.email,onChange:x}),0===m.email.length,Object(j.jsx)("input",{className:"form-control my-2",type:"tel",placeholder:"Telefono",name:"tel",value:m.tel,onChange:x}),0===m.email.length,Object(j.jsx)("button",{className:"btn mx-3",type:"submit",disabled:t,children:"Finalizar"})]})})]})]})};var U=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(g,{children:Object(j.jsx)(T,{children:Object(j.jsxs)(x.a,{children:[Object(j.jsx)(P,{}),Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{exact:!0,path:"/",children:Object(j.jsx)(N,{titulo:"Nuestro catalogo"})}),Object(j.jsx)(l.b,{exact:!0,path:"/productos/:categoryId",children:Object(j.jsx)(N,{titulo:"Nuestro catalogo"})}),Object(j.jsx)(l.b,{exact:!0,path:"/productos",children:Object(j.jsx)(N,{titulo:"Nuestro catalogo"})}),Object(j.jsx)(l.b,{exact:!0,path:"/detail/:itemId",children:Object(j.jsx)(F,{})}),Object(j.jsx)(l.b,{exact:!0,path:"/envios",children:Object(j.jsx)("h1",{children:"Pagina de Envios"})}),Object(j.jsx)(l.b,{exact:!0,path:"/contacto",children:Object(j.jsx)("h1",{children:"Pagina de Contacto"})}),Object(j.jsx)(l.b,{exact:!0,path:"/checkout",children:Object(j.jsx)(H,{})}),Object(j.jsx)(l.b,{exact:!0,path:"/carrito",children:Object(j.jsx)(z,{})}),Object(j.jsx)(l.b,{exact:!0,path:"*",children:Object(j.jsx)("h1",{children:"Error 404... pagina no encontrada."})})]})]})})})})},q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,93)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))};i.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(U,{})}),document.getElementById("root")),q()}},[[86,1,2]]]);
//# sourceMappingURL=main.d05097c8.chunk.js.map